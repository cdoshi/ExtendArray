(function(k){function l(){function k(b,a){var e=this.b(b),d=this.b(a),c;if(e.length!==d.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==d[c])return!1;return!0}function n(b){var a=[],e=b.length,d;a[0]=[];for(d=0;d<e;d++)a[0][d]=b[d];return a}function p(b,a){var e=b.length,d=[],c;a&&1===e&&e.unshift(e[0]);if(3>e)for(e=0;e<b[0];e++)for(d[e]=[],c=0;c<b[1];c++)d[e][c]=e===c?1:0;else for(c=b[0],e=0;e<c;e++)d[e]=p(b.slice(1),!1);return d}function l(b,a){var e=[],d=a[0],c,f;for(c=0;c<d;c++)for(e[c]=[],f=
0;f<d;f++)e[c][f]=Math.pow(-1,c+f)*this.j(this.g(b,[this.f(0,a[0]-1,1,[c]),this.f(0,a[0]-1,1,[f])]),!1);return e}var m={a:function(b){return void 0===b?!1:-1<b.constructor.toString().indexOf("Array")?!0:!1},b:function(b,a){if(void 0===a){if(void 0===b)return[];if(0===b.length)return 0;if(!this.a(b))return!1}var e=[];return void 0===b[0].length?[b.length]:e=e.concat(b.length,this.b(b[0],!1))},u:function(b,a,e){void 0===e&&(e=!0);if(e){if(void 0===b||0===b.length)return[];if(!this.a(b)||3<arguments.length||
"ones"!==a&&"zeros"!==a&&"rands"!==a&&"empty"!==a&&"custom"!==a&&"eye"!==a)return!1;if("eye"===a)return p.bind(this,b,e)()}var d=[],c;if(1===b.length){d=b[0];c=[];var f;for(f=0;f<d;f++)c[f]="ones"===a?1:"rands"===a?Math.random():"empty"===a?void 0:"custom"===a?value:0;return c}c=b[0];for(f=0;f<c;f++)d[f]=this.u(b.slice(1),a,value,!1);return d},i:function(b,a,e){if(void 0===e){if(void 0===b||0===b.length)return[];if(!this.a(b))return!1;void 0===a&&(a=[])}var d=this.b(b);if(1===d.length)if(0===a.length)for(e=
0;e<d[0];e++)a[e]=[b[e]];else{var c=this.b(a);for(e=0;e<d[0];e++)a[e][c[1]]=b[e]}else for(d=d.shift(),e=0;e<d;e++)a=this.i(b[e],a,!1);return a},h:function(b,a,e){if(void 0===e){if(void 0===b||void 0===a)return[];if(!this.a(b)||!this.a(a))return!1}var d=this.b(b),c=this.b(a),f=[];if(e){1===d.length&&(d.unshift(1),b=n(b));1===c.length&&(c.unshift(1),a=n(a));if(2<d.length)return console.error("Matrix multipication higher than 2D not supported"),!1;if(d[1]!=c[0])return console.error("Columns of first array do not match rows of second"),
!1;a=this.i(a)}if(1===d.length)return this.stat(this.l(b,a,"multiply"),"add")[0];e=d[0];c=c[1];for(d=0;d<e;d++){f[d]=[];for(var g=0;g<c;g++)f[d][g]=this.h(b[d],a[g],!1)}return f},l:function(b,a,e,d){if(void 0===d){if(void 0===b||void 0===a||void 0===e)return[];if(!this.a(b)||!this.a(a))return!1;if(!k.bind(this,b,a)())return console.error("Arrays must be of same dimensions"),!1}if("add"!==e&&"subtract"!==e&&"multiply"!==e&&"divide"!==e)return!1;var c=this.b(b);d=[];if(1===c.length)if("add"===e)for(var f=
0;f<c[0];f++)d[f]=b[f]+a[f];else if("subtract"===e)for(f=0;f<c[0];f++)d[f]=b[f]-a[f];else if("multiply"===e)for(f=0;f<c[0];f++)d[f]=b[f]*a[f];else{if("divide"===e)for(f=0;f<c[0];f++)d[f]=b[f]/a[f]}else for(c=c.shift(),f=0;f<c;f++)d[f]=this.l(b[f],a[f],e,!1);return d},c:function(b,a,e,d){if(void 0===b||void 0===a)return[];if(void 0===d){if("add"!==a&&"subtract"!==a&&"multiply"!==a&&"divide"!==a&&"abs"!==a&&"power"!==a&&"sqrt"!==a&&"log"!==a&&"log10"!==a&&"copy"!==a)return!1;if("abs"===a||"sqrt"===
a||"log"===a||"log10"===a||"copy"===a)e=0;if(void 0===e||"number"!==typeof e)return b;if(!this.a(b))return!1}var c=this.b(b),f;d=[];if(1===c.length)if(f=c[0],"add"===a)for(c=0;c<f;c++)d[c]=b[c]+e;else if("subtract"===a)for(c=0;c<f;c++)d[c]=b[c]-e;else if("multiply"===a)for(c=0;c<f;c++)d[c]=b[c]*e;else if("divide"===a)for(c=0;c<f;c++)d[c]=b[c]/e;else if("abs"===a)for(c=0;c<f;c++)d[c]=Math.abs(b[c]);else if("power"===a)for(c=0;c<f;c++)d[c]=Math.pow(b[c],e);else if("sqrt"===a)for(c=0;c<f;c++)d[c]=Math.sqrt(b[c]);
else if("log"===a)for(c=0;c<f;c++)d[c]=Math.log(b[c]);else if("log10"===a)for(c=0;c<f;c++)d[c]=Math.log10(b[c]);else{if("copy"===a)for(c=0;c<f;c++)d[c]=b[c]}else for(f=c.shift(),c=0;c<f;c++)d[c]=this.c(b[c],a,e,!1);return d},stat:function(b,a,e,d){if(void 0===d){if(void 0===b)return[];if(!this.a(b)||"mean"!==a&&"max"!==a&&"min"!==a&&"popstd"!==a&&"samstd"!==a&&"absmax"!==a&&"absmin"!==a&&"add"!==a&&"multiply"!==a)return!1;void 0===e&&(e="horizontal")}if("vertical"===e)return b=m.i(b),m.stat(b,a);
d=this.b(b);var c;e=[];if(1===d.length)if(c=d[0],"mean"===a){for(d=a=0;d<c;d++)a+=b[d];e[0]=a/c}else if("max"===a)e[0]=Math.max.apply(null,b);else if("absmax"===a)e[0]=Math.max.apply(null,this.c(b,"abs"));else if("absmin"===a)e[0]=Math.min.apply(null,this.c(b,"abs"));else if("min"===a)e[0]=Math.min.apply(null,b);else if("add"===a){for(d=a=0;d<c;d++)a+=b[d];e[0]=a}else if("multiply"===a){a=1;for(d=0;d<c;d++)a*=b[d];e[0]=a}else"popstd"===a?(this.stat(b,"mean"),e[0]=Math.sqrt(this.stat(this.v(this.c(b,
"subtract",this.stat(b,"mean")[0]),2),"add")[0]/c)):"samstd"===a&&(this.stat(b,"mean"),e[0]=Math.sqrt(this.stat(this.v(this.c(b,"subtract",this.stat(b,"mean")[0]),2),"add")[0]/(c-1)));else for(c=d.shift(),d=0;d<c;d++)e[d]=this.stat(b[d],a,!1);return e},g:function(b,a,e){if(void 0===e){if(void 0===b)return[];if(!this.a(b)&&!this.a(a))return!1}e=this.b(b);var d=[],c,f;if(a.length>e.length)return!1;if(a.length<e.length)for(f=0;f<e.length-a.length;f++)a[a.length]=":";for(f=0;f<a.length;f++)if("number"===
typeof a[f])a[f]=[a[f]];else if(":"===a[f])for(a[f]=[],c=0;c<e[f];c++)a[f][c]=c;c=":"===a[0]?b[0].length:a[0].length;if(1===e.length)for(f=0;f<c;f++)d[f]=b[a[0][f]];else for(f=0;f<c;f++)d[f]=this.g(b[a[0][f]],a.slice(1),!1);return d},j:function(b,a,e){void 0===a&&(a=!0);var d=this.b(b);if(a){if(void 0===b)return[];if(!this.a(b))return!1;if(2!==d.length)return console.error("Supports 2D matrices only"),!1;if(d[0]!==d[1])return console.error("Supports square matrices only"),!1;b=this.c(b,"copy");void 0===
e&&(e=0)}if(1===d[0])return b[0][0];if(2===d[0])return b[0][0]*b[1][1]-b[0][1]*b[1][0];var c=this.f(1,d[0]-1);a=d[0];var f=d[1],g,h;for(g=d=1;g<a;g++)for(h=1;h<f;h++)b[g][h]=b[g][h]*b[0][0]-b[g][0]*b[0][h];Math.abs(b[1][1])>Math.pow(10,5)?(d=Math.pow(10,-5),b=this.c(b,"multiply",d)):Math.abs(b[1][1])<Math.pow(10,-5)&&(d=Math.pow(10,5),b=this.c(b,"multiply",d));c=this.g(b,[c,c]);e=this.j(c,!1,e);e/=d;for(g=1;g<a-1;g++)e/=b[0][0];return e},f:function(b,a,e,d,c){void 0===e&&(e=1);void 0===d&&(d=[]);
if(!this.a(d))return console.error("exclude argument is an array"),!1;void 0===c&&(c=0);var f=[],g=-1,h=!1;for(0!==d.length&&(h=!0);b<=a||f.length<c;)h&&(g=d.indexOf(b)),-1===g&&(f[f.length]=b),b+=e;return f},inverse:function(b,a){void 0===a&&(a=!0);var e=this.b(b);if(a){if(void 0===b)return[];if(!this.a(b))return!1}if(2!==e.length)return console.error("Supports 2D matrices only"),!1;if(e[0]!==e[1])return console.error("Supports square matrices only"),!1;e=this.j(b);return 0===e?(console.error("Inverse of singular matrix cannot be determined"),
!1):this.c(this.s(b,!1),"divide",e)},A:function(b){if(void 0===b)return[];if(!this.a(b))return!1;var a=this.b(b);if(2<a.length)return console.error("Supports only upto 2D"),!1;var e=this.i(b);return a[0]>a[1]?this.h(this.inverse(this.h(e,b),!1),e):this.h(e,this.inverse(this.h(b,e),!1))},s:function(b,a){void 0===a&&(a=!0);if(a){if(void 0===b)return[];if(!this.a(b))return!1}var e=this.b(b);if(a){if(2!==e.length)return console.error("Supports 2D matrices only"),!1;if(e[0]!==e[1])return console.error("Supports square matrices only"),
!1}return this.i(l.bind(this,b,e)())},o:function(b,a){void 0===a&&(a=!0);if(a){if(void 0===b)return[];if(!this.a(b))return!1}var e=[],d=this.b(b);if(1===d.length)for(var c=0;c<d;c++)e[c]=b[c];else for(d=d[0],c=0;c<d;c++)e=e.concat(this.o(b[c],!1));return e},m:function(b,a,e,d){void 0===d&&(d=!0);if(d){if(void 0===b)return[];if(!this.a(b)||!this.a(a))return!1;d=this.b(b);var c=this.stat(d,"multiply")[0];if(c!==this.stat(a,"multiply")[0])return console.error("Can't reshape "+this.print(d)+" array to "+
this.print(a)+" array"),!1;1<d.length&&(b=this.o(b));if(void 0===e)e=0;else if(c%e)return console.error("Cannot reshape with this jump value"),!1}d=[];if(1===a.length)for(c=0;c<b.length;c++)d[c]=b[c];else{var f=a[0],g=this.stat(a,"multiply")[0]/f;a=this.g(a,[this.f(1,a.length-1)]);for(c=0;c<f;c++)0===e?d.push(this.m(this.g(b,[this.f(c*g,0,1,[],g)]),a,e,!1)):d.push(this.m(this.g(b,[this.f(c,0,f,[],g)]),a,e,!1))}return d},print:function(b){if(void 0===b)return[];if(!this.a(b))return!1;var a=this.b(b),
e,d="";if(2<a.length)return console.error("Supports upto 2D matrices only"),!1;if(2===a.length){e=a[0];for(var a=a[1],d=d+"[",c=0;c<e;c++){for(var d=d+"[",f=0;f<a;f++)d=f===a-1?d+b[c][f]:d+(b[c][f]+", ");d=c!==e-1?d+"],":d+"]"}}else for(e=a[0],d+="[",c=0;c<e;c++)d=c===e-1?d+b[c]:d+(b[c]+", ");return d+"]"}};return m}"undefined"===typeof Library&&(k.w=l())})(window);